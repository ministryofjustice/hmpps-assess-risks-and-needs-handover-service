info.app:
  name: Hmpps Handover Service
  version: 1.0

spring:
  application:
    name: hmpps-assess-risks-and-needs-handover-service
  codec:
    max-in-memory-size: 10MB
  security:
    oauth2:
      resourceserver:
        jwt:
          issuers:
            - issuer-name: "HMPPS Handover"
              jwk-set-uri: ${app.self.baseUrl}/oauth2/jwks
              issuer-uri: ${app.self.baseUrl}
            - issuer-name: "HMPPS Auth"
              jwk-set-uri: ${app.services.hmpps-auth.baseUrl}/auth/.well-known/jwks.json
              issuer-uri: ${app.services.hmpps-auth.baseUrl}/auth/issuer
      authorizationserver:
        jwk:
          pem-encoded: ${jwk-pem.encoded:LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpQcm9jLVR5cGU6IDQsRU5DUllQVEVECkRFSy1JbmZvOiBBRVMtMjU2LUNGQiwwQkRGQURGRDJBNDIxRDQwQTlCMkM3MDIwMkU1NTY1OAoKZ3hzWGlKTlVnTTBqWmJsZzVCVy9ob2pnTW1SSnpsNTZENkNuajVaRFFIN0NWazNURktHbWxQVmFyV1pESXBWdgo3UXJCU09TUWFiNDRKQkpRNnhSTFJyenZJUGN4V1FnZGFkMU14Wkh0TmM4VnlULzExRkdCVmYwVGpZTTVORlFUClJHQmN3b01sWlhyNGhGYk9Mdk5ReTBGdCtYY3VnMEpRajRZQnkrWW9WNXNxOXVpanJDVzcxSTJHeTFxbG40ZXAKeE1tdG5hblY1K3MxWEZXMnVUVEQ0RkZINUVVaGw1blNIN3JybGRQTXVrWlNRdDhwU3Z6eUpVSDVvbXYzRUVYWApRYU5OMEJvU0xjQ0NVZXltMkJNd2hqRTFtcFRvWDNSenBDeGJ1RzgvRlVINUIvSlI5RUI1Y2x6UXBGYWw4Qm9ICmpza1ErZWRvSzF5a2I1RTZPVVB1SlI0YlhCVkprTDM0RjRDZngzdU9kRVpDTnl1Nlc3YkMxTXZHbkxSTmQrdWUKMG54WW54Nk5hTnJSVHNBbnh5RWtJaVQrUXZGbkdlYmwvSzVZaXdRdzQ2djBiWS9POHlmMlVTc2pyMlJyVlNaUApvTi9UVE8rMGkxeGpnWUQ5TGFLaSszbXZRNWhsYjA2MDAvTndPbGMxc3FaQ1o2N0pKSUJkTkpuY1VQRVdVUFlVCjlCT0RlT1B3MDBjMUloWXI2VW1oMjJpbDRua2pRNVJpZ2J6RWhwL1FRRGNFSVVSQnQ2UzVVVWlHV1pqL2ZSd2cKb0tqYVpwUndZV3JRMjc2SGF2K1ZRYyt3WGJuOG13NThCVElic0pUUTE2bHdMd1pxTExuT2w3OHBGVnByNHJVSgpWbkZjTEI5OTE2bTNoM29yZmk4ck1KVFFqUXg1ZUhGKzRlaUc4dGpnYU9vcDVPZzg3MDVJMVg1b2xRUjRTYUhzCk1Rb1NySmM1a1hzdXhGbmFMRzRnaFU5M01tUlE0cENIaXZnTFh4N0IzWkNOYjZEQ3Y2QXIwRGRiczUvKzJlZC8KTm9FWjd0QXBLZ21HNkdaQ0ZPRUhOMHpvQnZOcFM0c2duaXRIYWptd25TVnhVQmhiMEpBZ3IzeVQ1MitvamdZZgp3aWVyMlh2ajNKWDk1Y1B2OXo3SUE3SW9nT2txano0VHVvSWJmRXFMTHVVZXJlSDNDNENyd2l0eUtvRmJ1SzhOCmx6ZExSVHIrQkYxajZ4SWlEeURzQXNBVmtBOUt2NWNGRXBYclhvSERTTUZLUU9pQnVKeGhjV3BMTnVRLzVMZHkKY3BBeTNnb1JGOWZTL1lsRVpYWERDRFR4UVhNeVIzL0s0TGg5VnZ0ekNWeHJuM3JGNXVFMm5EVVZQVmlXdHpwaQowRk5GcEdoc0JIMHI5MHVHSW9DTVYvZ2NFWFNjbExYTUIwS2FHRVE1c2l3d25iVE4vS1RYR2k0R3BtdU5xUkR0CkJCclVZMFpyUVFoWEhpK2ZCZDFWcUUxd1FqYmVvcFRxaG1DQUNFQ1VZc1pxd0RvL1U4RnJFYVBYYmlBcTdzbmIKT1FORlM4TytTOUR5U2dJdG1TRml5ek8xdGNQNXVtV3hUOVJFMGtNbUk1SWlWTkdQSWdhMnNtVzRieUJ0UHRadQpLTVR0eWNVMlpNVm5IbUoxNWQyNDJIOGI1K0VlOEk5QUtvL2hjajJTcGhKVVN0RHU1dTRCc1lRM1k0TmFyTU9kCkZDdHZhUkY0K3d6REUyNVlTcVZlT3FwRWRIbVdIeE1kZGdUWEVIcmJlNTRxOXhpdnV1OWhIVU1SYi85M0xvZ0IKc095aVJOS2VYMFVHalhCdDd6T1B6T3VJM2pmajFiZ0VZRjRJZmJsNERGbkk0U0F1UWZJMnhweGtMd05aa0lZMgpzRVdhUlgxcE5QNURraHhxUGNUWmw4TitZU2c4S3BHaXhJM3ZzUmxZVDJ6eXh4dzF3VnVaWTN5Q0RsOHBUQWpNCnRxNWZqNVRLS1dGV0pQSFJMUVFXSjFDNmRzNGRsZis0Q29pRG5VRFdLVlUzc3lGOGZOY0E4MTFoUFR1WGJTeUIKeE5RZWZ0N3kxbzZzV2hVOVE0NWtvWURPdWlkblFRZXlDZUErWVJLTWY3OUVVQlRQeXc9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQotLS0tLUJFR0lOIFBVQkxJQyBLRVktLS0tLQpNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQThoYk1GbkF5K1FrODNiZWNsU0g2Ck5pMzBpVFJsYkkxUEhkL2oyMGZSMTdJTWtYOUZsdzN1SkFPdXhKRFZub0lUSTQ4WmhIeWxVNDNGZkt1eGJqYzUKWVQ5bFkzZS9ENE9qVjRZMXRoelBadHRST1REaDYzcTFmUEZuN2lrbTlmSHNKVEF0QWdGQUlCVm1SZWVvMHZDRwpHVGNkQy9sQ0hrZTRCeitKRll5MlROdXozR0lzeFVTR1FqL09mR1gxOVBKTnVJL1NvRHo5QkwwZ0xiZndCSGZNCnRTYVQ0SlRhNjR2TllZVlh1aVpJb05GZDJ6R3QweUhpWm8xZVFRbzk2M2QyV3BJWkR2TDd1MnJaNTgrdkVVakIKMVBDTzUvMVN2VUR0ZW9RKzdWaUxidkNIOEhLY3dFSHVodlRxblJOZWNxdTcxUThWVmQ4TUF2aFNWQU9OMjF3TgpJd0lEQVFBQgotLS0tLUVORCBQVUJMSUMgS0VZLS0tLS0K}
          pem-secret: ${jwk-pem.secret}
        client:
          sentence-plan:
            registration:
              client-id: ${client.sp.id:sentence-plan}
              client-secret: ${{noop}client.sp.secret:{noop}sp-secret}
              client-authentication-methods:
                - client_secret_basic
              authorization-grant-types:
                - authorization_code
              redirect-uris:
                - ${client.sp.redirectUri:http://localhost:3000/sign-in/callback}
              scopes:
                - "openid"
                - "profile"
          strength-and-needs-assessment:
            registration:
              client-id: ${client.san.id:strength-and-needs-assessment}
              client-secret: ${client.san.secret:san-secret}
              client-authentication-methods:
                - client_secret_basic
              authorization-grant-types:
                - authorization_code
              redirect-uris:
                - ${client.san.redirectUri:http://localhost:3000/sign-in/callback}
              scopes:
                - "openid"
                - "profile"


  jackson:
    date-format: "yyyy-MM-dd HH:mm:ss"
    serialization:
      WRITE_DATES_AS_TIMESTAMPS: false
  data:
    redis:
      host: localhost
      port: 6379

server:
  port: 8080
  servlet:
    context-path: /
    session:
      cookie:
        name: HMPPS_HANDOVER_SESSION
  forward-headers-strategy: native
  tomcat:
    remoteip:
      remote-ip-header: x-forwarded-for
      protocol-header: x-forwarded-proto
      internal-proxies: 10\.\d{1,3}\.\d{1,3}\.\d{1,3}|192\.168\.\d{1,3}\.\d{1,3}|169\.254\.\d{1,3}\.\d{1,3}|127\.\d{1,3}\.\d{1,3}\.\d{1,3}|172\.1[6-9]{1}\.\d{1,3}\.\d{1,3}|172\.2[0-9]{1}\.\d{1,3}\.\d{1,3}|172\.3[0-1]{1}\.\d{1,3}\.\d{1,3}|0:0:0:0:0:0:0:1|::1|100\.6[4-9]\.\d{1,3}\.\d{1,3}|100\.[7-9][0-9]{1}\.\d{1,3}\.\d{1,3}|100\.1[0-1][0-9]{1}\.\d{1,3}\.\d{1,3}|100\.12[0-7]\.\d{1,3}\.\d{1,3}
  shutdown: graceful
  error:
    include-message: always
    whitelabel:
      enabled: false

app:
  services:
    hmpps-auth:
      baseUrl: ${hmpps-auth.base-url:https://sign-in-dev.hmpps.service.justice.gov.uk}
  self:
    baseUrl: ${hmpps-handover.base-url:http://localhost:8080}
    endpoints:
      handover: "/handover"

management:
  endpoints:
    web:
      base-path: /
      exposure:
        include: 'info, health'
  endpoint:
    health:
      cache:
        time-to-live: 2000ms
      show-components: always
      show-details: always
      probes:
        enabled: true
    info:
      cache:
        time-to-live: 2000ms
